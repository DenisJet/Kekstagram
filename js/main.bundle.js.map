{"version":3,"file":"./main.bundle.js","mappings":"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","sources":["webpack://kekstagram/./source/js/img-load.js","webpack://kekstagram/webpack/bootstrap","webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/miniature-pictures.js","webpack://kekstagram/./source/js/img-upload-edit.js","webpack://kekstagram/./source/js/messages-modals.js","webpack://kekstagram/./source/js/img-upload-validation.js","webpack://kekstagram/./source/js/img-upload-overlay.js","webpack://kekstagram/./source/js/fetch.js","webpack://kekstagram/./source/js/img-filters.js"],"sourcesContent":["const FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst uploadFile = document.querySelector('#upload-file');\nconst uploadPreview = document.querySelector('.img-upload__preview img');\nconst previews = document.querySelectorAll('.effects__preview');\n\nuploadFile.addEventListener('change', () => {\n  const file = uploadFile.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      uploadPreview.src = reader.result;\n\n      previews.forEach((filter) => {\n        filter.style.backgroundImage = `url(${reader.result})`;\n      });\n    });\n\n    reader.readAsDataURL(file);\n  }\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const ALERT_SHOW_TIME = 5000;\n\n// Функция, возвращающая случайное целое число из переданного диапазона включительно\n\nconst getRandomNumber = (firstNumber, lastNumber) => {\n  if (firstNumber < 0 || lastNumber < 0 || firstNumber >= lastNumber) {\n    return -1;\n  }\n\n  return (\n    Math.floor(Math.random() * (lastNumber - firstNumber + 1)) + firstNumber\n  );\n};\n\n//Функция для проверки максимальной длинны строки\n\nconst isStringMaxLength = (string, maxLength) => {\n  return string.length <= maxLength;\n};\n\n// Функция для выбора случайного элемента массива\n\nconst getRandomArrayElement = (array) => {\n  return array[getRandomNumber(0, array.length - 1)];\n};\n\n// Проверка на нажатую клавишу escape\n\nconst Keys = {\n  ESC: 'Esc',\n  ESCAPE: 'Escape',\n};\n\nconst isEscEvent = (evt) => {\n  return evt.key === Keys.ESCAPE || evt.key === Keys.ESC;\n};\n\n// Сообщение об ошибке\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 100;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = 0;\n  alertContainer.style.top = 0;\n  alertContainer.style.right = 0;\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.margin = '25vh 25vw';\n  alertContainer.style.lineHeight = '30px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'red';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, ALERT_SHOW_TIME);\n}\n\nexport {getRandomNumber, isStringMaxLength, getRandomArrayElement, isEscEvent, showAlert};\n","import { isEscEvent } from './util.js';\n\nconst COMMENTS_LOAD_STEP = 5;\n\nconst bigPic = document.querySelector('.big-picture');\nconst body = document.querySelector('body');\nconst bigPicCancelElement = bigPic.querySelector('.big-picture__cancel');\nconst commentTemplate = document.querySelector('#comment').content.querySelector('.social__comment');\nconst socialCommentsList = bigPic.querySelector('.social__comments');\nconst commentsLoader = bigPic.querySelector('.comments-loader');\nconst commentCount = bigPic.querySelector('.social__comment-count');\n\nlet commentsLoaded = [];\nlet commentsCount = COMMENTS_LOAD_STEP;\n\n// функция показа комментариев\n\nconst renderComment = (comment) => {\n  const commentSimilar = commentTemplate.cloneNode(true);\n\n  commentSimilar.querySelector('.social__picture').src = comment.avatar;\n  commentSimilar.querySelector('.social__picture').alt = comment.name;\n  commentSimilar.querySelector('.social__text').textContent = comment.message;\n\n  return commentSimilar;\n};\n\nconst renderComments = (comments) => {\n\n  const onCommentsLoaderClick = () => {\n    renderComments(comments);\n  }\n\n  commentsCount = (comments.length < COMMENTS_LOAD_STEP) ? comments.length : commentsCount;\n  commentsLoaded = comments.slice(0, commentsCount);\n  socialCommentsList.innerHTML = '';\n  commentCount.textContent = `${commentsLoaded.length} из ${comments.length} комментариев`;\n\n  let commentsListFragment = document.createDocumentFragment();\n\n  commentsLoaded.forEach(comment => {\n    commentsListFragment.appendChild(renderComment(comment));\n  })\n\n  socialCommentsList.appendChild(commentsListFragment);\n\n  if (comments.length > COMMENTS_LOAD_STEP && commentsLoaded.length < comments.length) {\n    commentsLoader.classList.remove('hidden');\n    commentsLoader.addEventListener('click', onCommentsLoaderClick, { once: true })\n  } else {\n    commentsLoader.classList.add('hidden');\n  }\n\n  commentsCount += COMMENTS_LOAD_STEP;\n}\n\n// функция вывода большой картинки\n\nconst closeBigPic = () => {\n  bigPic.classList.add('hidden');\n  body.classList.remove('modal-open');\n  socialCommentsList.innerHTML = '';\n  bigPicCancelElement.removeEventListener('click', closeBigPic);\n  document.removeEventListener('keydown', onBigPicEscKeyDown);\n  commentsLoaded = [];\n  commentsCount = COMMENTS_LOAD_STEP;\n}\n\nconst onBigPicEscKeyDown = (evt) => {\n  if (isEscEvent(evt)) {\n    closeBigPic()\n  }\n}\n\nconst showBigPic = (pic) => {\n  commentsCount = COMMENTS_LOAD_STEP;\n  commentsLoaded = [];\n  body.classList.add('modal-open');\n  bigPic.querySelector('.big-picture__img > img').src = pic.url;\n  bigPic.querySelector('.likes-count').textContent = pic.likes;\n  renderComments(pic.comments.slice());\n  bigPic.querySelector('.social__caption').textContent = pic.description;\n\n  document.addEventListener('keydown', onBigPicEscKeyDown)\n\n  bigPicCancelElement.addEventListener('click', closeBigPic);\n\n  bigPic.classList.remove('hidden');\n};\n\nexport {showBigPic};\n","import { showBigPic } from './big-picture.js';\n\nconst minPicList = document.querySelector('.pictures');\nconst minPicTemplate = document.querySelector('#picture').content.querySelector('.picture');\n\nconst createMinPic = (pic) => {\n  const newMinPic = minPicTemplate.cloneNode(true);\n\n  newMinPic.querySelector('.picture__img').src = pic.url;\n  newMinPic.querySelector('.picture__comments').textContent = pic.comments.length;\n  newMinPic.querySelector('.picture__likes').textContent = pic.likes;\n\n  newMinPic.addEventListener('click', (evt) => {\n    evt.preventDefault();\n    showBigPic(pic);\n  });\n\n  return newMinPic;\n};\n\nconst createMinPicList = (pictures) => {\n  const newMinPicListFragment = document.createDocumentFragment();\n\n  pictures.forEach((pic) => {\n    newMinPicListFragment.appendChild(createMinPic(pic));\n  });\n\n  minPicList.appendChild(newMinPicListFragment);\n\n};\n\nexport {createMinPicList};\n","const Scale = {\n  MIN: 25,\n  MAX: 100,\n  STEP: 25,\n};\n\nconst Slider = {\n  MAX: 100,\n  MIN: 0,\n  STEP: 1,\n};\n\nconst scaleControlValue = document.querySelector('.scale__control--value');\nconst imgPreview = document.querySelector('.img-upload__preview > img');\nconst effectSliderElement = document.querySelector('.effect-level__slider');\nconst effectLevelValueInput = document.querySelector('.effect-level__value');\nconst effectLevel = document.querySelector('.effect-level');\nconst effectNoneInput = document.querySelector('#effect-none');\nconst hashtagsInput = document.querySelector('.text__hashtags');\nconst descriptionInput = document.querySelector('.text__description');\n\n// масштабирование изображения\n\nconst toScaleSmaller = () => {\n  let scale =  parseInt(scaleControlValue.value, 10) - Scale.STEP;\n\n  if (scale <= Scale.MIN) {\n    scale = Scale.MIN;\n  }\n\n  scaleControlValue.value = `${scale}%`;\n  imgPreview.style.transform = `scale(${scale / 100})`;\n};\n\nconst toScaleBigger = () => {\n  let scale =  parseInt(scaleControlValue.value, 10) + Scale.STEP;\n\n  if (scale >= Scale.MAX) {\n    scale = Scale.MAX;\n  }\n\n  scaleControlValue.value = `${scale}%`;\n  imgPreview.style.transform = `scale(${scale / 100})`;\n};\n\n// Наложение эффектов на изображение\n\nconst effectsToggle = (evt) => {\n  imgPreview.className = `effects__preview--${evt.target.value}`;\n  effectSliderElement.noUiSlider.set(100);  // сброс слайдера при переключении эффекта\n\n  if (imgPreview.classList.contains('effects__preview--none')) {\n    effectLevel.style.visibility = 'hidden';\n  } else {\n    effectLevel.style.visibility = 'visible';\n  }\n};\n\n// Работа слайдера\n\nconst effects = {\n  none: () => '',\n  chrome: () => `grayscale(${parseInt(effectLevelValueInput.value, 10) * 0.01})`,\n  sepia: () => `sepia(${parseInt(effectLevelValueInput.value, 10) * 0.01})`,\n  marvin: () => `invert(${effectLevelValueInput.value}%)`,\n  phobos: () => `blur(${(parseInt(effectLevelValueInput.value, 10) * 3) * 0.01}px)`,\n  heat: () => `brightness(${(parseInt(effectLevelValueInput.value, 10) * 3) * 0.01})`,\n}\n\nwindow.noUiSlider.create(effectSliderElement, {\n  range: {\n    min: Slider.MIN,\n    max: Slider.MAX,\n  },\n\n  start: Slider.MAX,\n  step: Slider.STEP,\n  connect: 'lower',\n});\n\neffectSliderElement.noUiSlider.on('update', (_, handle, unencoded) => {\n  effectSliderElement.value = unencoded[handle];\n  effectLevelValueInput.value = effectSliderElement.value;\n\n  const currentEffect = imgPreview.className.replace('effects__preview--', '');\n\n  if (!currentEffect) {\n    imgPreview.style.filter = '';\n    return;\n  }\n\n  imgPreview.style.filter = effects[currentEffect](effectLevelValueInput.value);\n});\n\n// Сброс эффектов\n\nconst resetEditor = () => {\n  scaleControlValue.value = '100%';\n  imgPreview.style.transform = 'scale(1)';\n  imgPreview.className = '';\n  imgPreview.style.filter = '';\n  effectNoneInput.checked = true;\n  hashtagsInput.value = '';\n  descriptionInput.value = '';\n}\n\n// Экспорт\n\nexport { resetEditor, toScaleSmaller, toScaleBigger, effectsToggle };\n","import { isEscEvent } from './util.js';\n\nconst successMessageTemplate = document.querySelector('#success').content;\nconst errorMessageTemplate = document.querySelector('#error').content;\nconst body = document.querySelector('body');\n\nconst removeMessage = (messageElement) => {\n  document.querySelector(messageElement).remove();\n}\n\n// Сообщения об  успешной отправке\n\nconst onDocumentClickRemoveSuccessMessage = (evt) => {\n  if (!document.querySelector('.success__inner').contains(evt.target)) {\n    removeMessage('.success');\n    document.removeEventListener('click', onDocumentClickRemoveSuccessMessage)\n  }\n}\n\nconst onSuccessMessageEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    removeMessage('.success');\n    document.removeEventListener('keydown', onSuccessMessageEscKeydown);\n  }\n}\n\nconst successMessageShow = () => {\n  let successMessage = successMessageTemplate.cloneNode(true);\n\n  const successButton = successMessage.querySelector('.success__button');\n\n  successButton.addEventListener('click', () => {\n    removeMessage('.success');\n  });\n\n  document.addEventListener('click', onDocumentClickRemoveSuccessMessage);\n\n  document.addEventListener('keydown', onSuccessMessageEscKeydown);\n\n  body.appendChild(successMessage);\n}\n\n// сообщение об ошибке\n\nconst onDocumentClickRemoveErrorMessage = (evt) => {\n  if (!document.querySelector('.success__inner').contains(evt.target)) {\n    removeMessage('.success');\n    document.removeEventListener('click', onDocumentClickRemoveErrorMessage)\n  }\n}\n\nconst onErrorMessageEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    removeMessage('.error');\n    document.removeEventListener('keydown', onErrorMessageEscKeydown);\n  }\n}\n\nconst errorMessageShow = () => {\n  let errorMessage = errorMessageTemplate.cloneNode(true);\n\n  const errorButton = errorMessage.querySelector('.error__button');\n\n  errorButton.addEventListener('click', () => {\n    removeMessage('.error');\n  });\n\n  document.addEventListener('click', onDocumentClickRemoveErrorMessage);\n\n  document.addEventListener('keydown', onErrorMessageEscKeydown);\n\n  body.appendChild(errorMessage);\n}\n\nexport {successMessageShow, errorMessageShow};\n","// валидация формы отправки изображения\n\nimport { sendData } from './fetch.js';\nimport { successMessageShow, errorMessageShow } from './messages-modals.js';\n\nconst HASHTAG_MAX_LENGTH = 20;\nconst MAX_HASHTAGS_AMOUNT = 5;\nconst VALID_CHAR = new RegExp('[^a-zа-яё0-9#]');\n\nconst hashtagsInput = document.querySelector('.text__hashtags');\n\nconst onHashtagsInputInput = () => {\n  hashtagsInput.setCustomValidity('');\n\n  if (hashtagsInput.value === '') {\n    return;\n  }\n\n  const hashtagsArray = hashtagsInput.value.toLowerCase().trim().split(/\\s+/);\n\n  if (hashtagsArray.length > MAX_HASHTAGS_AMOUNT) {\n    hashtagsInput.setCustomValidity('Нельзя указать больше 5 хэш-тегов');\n  }\n\n  hashtagsArray.forEach((element) => {\n    if (element[0] !== '#') {\n      hashtagsInput.setCustomValidity(\n        'Хэш-тег начинается с символа # (решётка)',\n      );\n    } else if (VALID_CHAR.test(element)) {\n      hashtagsInput.setCustomValidity('Недопустимый символ');\n    } else if (element == '#') {\n      hashtagsInput.setCustomValidity(\n        'Хеш-тег не может состоять только из одной решётки',\n      );\n    } else if (element.length > HASHTAG_MAX_LENGTH) {\n      hashtagsInput.setCustomValidity(\n        'Максимальная длина одного хэш-тега 20 символов',\n      );\n    } else if (element.indexOf('#', 1) >= 1) {\n      hashtagsInput.setCustomValidity('Хэш-теги разделяются пробелами');\n    } else if (hashtagsArray.length > new Set(hashtagsArray).size) {\n      hashtagsInput.setCustomValidity(\n        'Один и тот же хэш-тег не может быть использован дважды',\n      );\n    }\n  });\n\n  hashtagsInput.reportValidity(); //проверка валидности поля на каждый ввод символа\n};\n\n// Отправка формы\n\nconst setUploadFormSubmit = (evt) => {\n  evt.preventDefault();\n\n  sendData(successMessageShow, errorMessageShow, new FormData(evt.target));\n};\n\nexport { setUploadFormSubmit, onHashtagsInputInput };\n","import { isEscEvent } from './util.js';\nimport {\n  resetEditor,\n  toScaleSmaller,\n  toScaleBigger,\n  effectsToggle\n} from './img-upload-edit.js';\nimport { setUploadFormSubmit, onHashtagsInputInput } from './img-upload-validation.js';\n\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\nconst uploadCancelButton = uploadOverlay.querySelector('#upload-cancel');\nconst scaleControlSmaller = uploadOverlay.querySelector(\n  '.scale__control--smaller',\n);\nconst scaleControlBigger = uploadOverlay.querySelector(\n  '.scale__control--bigger',\n);\nconst effectsList = uploadOverlay.querySelector('.effects__list');\nconst effectLevel = uploadOverlay.querySelector('.effect-level');\nconst hashtagsInput = uploadOverlay.querySelector('.text__hashtags');\nconst descriptionInput = uploadOverlay.querySelector('.text__description');\nconst body = document.querySelector('body');\nconst uploadForm = document.querySelector('.img-upload__form');\n\n// открытие, закрытие окна редактирования изображения\n\nconst onUploadEscKeydown = (evt) => {\n  if (\n    isEscEvent(evt) &&\n    !(\n      hashtagsInput == document.activeElement ||\n      descriptionInput == document.activeElement\n    )\n  ) {\n    evt.preventDefault();\n    closeUploadOverlay();\n  }\n}\n\nconst openUploadOverlay = () => {\n  uploadOverlay.classList.remove('hidden');\n  body.classList.add('modal-open');\n  resetEditor();\n  scaleControlSmaller.addEventListener('click', toScaleSmaller);\n  scaleControlBigger.addEventListener('click', toScaleBigger);\n  effectLevel.style.visibility = 'hidden';\n  effectsList.addEventListener('click', effectsToggle);\n  uploadCancelButton.addEventListener('click', closeUploadOverlay);\n  document.addEventListener('keydown', onUploadEscKeydown);\n  uploadForm.addEventListener('submit', setUploadFormSubmit);\n  hashtagsInput.addEventListener('input', onHashtagsInputInput)\n};\n\nconst closeUploadOverlay = () => {\n  uploadOverlay.classList.add('hidden');\n  body.classList.remove('modal-open');\n  uploadInput.value = '';\n  scaleControlSmaller.removeEventListener('click', toScaleSmaller);\n  scaleControlBigger.removeEventListener('click', toScaleBigger);\n  effectsList.removeEventListener('click', effectsToggle);\n  uploadCancelButton.removeEventListener('click', closeUploadOverlay);\n  document.removeEventListener('keydown', onUploadEscKeydown);\n  uploadForm.removeEventListener('submit', setUploadFormSubmit);\n  hashtagsInput.removeEventListener('input', onHashtagsInputInput)\n};\n\nuploadInput.addEventListener('change', () => {\n  openUploadOverlay();\n});\n\nexport { openUploadOverlay, closeUploadOverlay };\n","import { createMinPicList } from './miniature-pictures.js';\nimport { showAlert } from './util.js';\nimport { closeUploadOverlay } from './img-upload-overlay.js';\n\n// Получение и отправка данных\nconst imgFilters = document.querySelector('.img-filters');\n\nlet picturesData = [];\n\nconst getData = () => {\n  fetch('https://23.javascript.pages.academy/kekstagram/data')\n    .then((response) => response.json())\n    .then((pictures) => {\n      picturesData = pictures.slice();\n      createMinPicList(pictures);\n      imgFilters.classList.remove('img-filters--inactive');\n    })\n    .catch(() => {\n      showAlert('Не удалось получить данные. Попробуйте ещё раз (перезагрузите страницу)!');\n    });\n};\n\nconst sendData = (onSuccess, onFail, body) => {\n  fetch('https://23.javascript.pages.academy/kekstagram', {\n    method: 'POST',\n    body,\n  }).then((response) => {\n    closeUploadOverlay();\n    if (response.ok) {\n      onSuccess();\n    } else {\n      onFail();\n    }\n  }).catch(() => {\n    closeUploadOverlay();\n    onFail();\n  })\n}\n\nexport {getData, sendData, picturesData};\n","import { createMinPicList } from './miniature-pictures.js';\nimport { getRandomArrayElement } from './util.js';\nimport { picturesData } from './fetch.js';\n\n// фильтр загруженных изображений\n\nconst ARR_RANDOMPICS_COUNT = 10;\nconst RERENDER_DELAY = 500;\n\nconst picturesContainer = document.querySelector('.pictures');\nconst buttonDefault = document.querySelector('#filter-default');\nconst buttonRandom = document.querySelector('#filter-random');\nconst buttonDiscussed = document.querySelector('#filter-discussed');\n\nconst picturesRemove = () => {\n  const pictures = picturesContainer.querySelectorAll('.picture');\n  pictures.forEach(picture => {\n    picture.remove();\n  })\n}\n\nconst activeClassRemove = () => {\n  const activeButton = document.querySelector('.img-filters__button--active');\n  activeButton.classList.remove('img-filters__button--active');\n}\n\nconst debounce = (callback, delay) => {\n  let timeout;\n\n  return function() {\n    clearTimeout(timeout);\n    timeout = setTimeout(callback, delay);\n  };\n};\n\nconst onClickButtonDefault = () => {\n  picturesRemove();\n  activeClassRemove();\n  buttonDefault.classList.add('img-filters__button--active');\n  createMinPicList(picturesData);\n};\n\nconst onClickButtonRandom = () => {\n  picturesRemove();\n  activeClassRemove();\n  buttonRandom.classList.add('img-filters__button--active');\n\n  const randomPicturesData = [];\n\n  for (let i = 0; randomPicturesData.length < ARR_RANDOMPICS_COUNT; ++i) {\n    const randomElement = getRandomArrayElement(picturesData)\n\n    if (!randomPicturesData.includes((randomElement))) {\n      randomPicturesData.push(randomElement);\n    }\n  }\n\n  createMinPicList(randomPicturesData);\n}\n\nconst onClickButtonDiscussed = () => {\n  picturesRemove();\n  activeClassRemove();\n  buttonDiscussed.classList.add('img-filters__button--active');\n  createMinPicList(picturesData.slice().sort((a, b) => {\n    return b.comments.length - a.comments.length;\n  }))\n}\n\nbuttonDefault.addEventListener('click', debounce(onClickButtonDefault, RERENDER_DELAY));\nbuttonRandom.addEventListener('click', debounce(onClickButtonRandom, RERENDER_DELAY));\nbuttonDiscussed.addEventListener('click', debounce(onClickButtonDiscussed, RERENDER_DELAY));\n"],"names":["FILE_TYPES","uploadFile","document","querySelector","uploadPreview","previews","querySelectorAll","addEventListener","file","files","fileName","name","toLowerCase","some","it","endsWith","reader","FileReader","src","result","forEach","filter","style","backgroundImage","readAsDataURL","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","isEscEvent","evt","key","bigPic","body","bigPicCancelElement","commentTemplate","content","socialCommentsList","commentsLoader","commentCount","commentsLoaded","commentsCount","renderComments","comments","length","slice","innerHTML","textContent","commentsListFragment","createDocumentFragment","comment","appendChild","commentSimilar","cloneNode","avatar","alt","message","renderComment","classList","remove","once","add","closeBigPic","removeEventListener","onBigPicEscKeyDown","minPicList","minPicTemplate","createMinPicList","pictures","newMinPicListFragment","pic","newMinPic","url","likes","preventDefault","description","showBigPic","createMinPic","scaleControlValue","imgPreview","effectSliderElement","effectLevelValueInput","effectLevel","effectNoneInput","hashtagsInput","descriptionInput","toScaleSmaller","scale","parseInt","value","transform","toScaleBigger","effectsToggle","className","target","noUiSlider","set","contains","visibility","effects","none","chrome","sepia","marvin","phobos","heat","window","create","range","min","max","start","step","connect","on","_","handle","unencoded","currentEffect","replace","successMessageTemplate","errorMessageTemplate","removeMessage","messageElement","onDocumentClickRemoveSuccessMessage","onSuccessMessageEscKeydown","successMessageShow","successMessage","onDocumentClickRemoveErrorMessage","onErrorMessageEscKeydown","errorMessageShow","errorMessage","VALID_CHAR","RegExp","onHashtagsInputInput","setCustomValidity","hashtagsArray","trim","split","element","test","indexOf","Set","size","reportValidity","setUploadFormSubmit","sendData","FormData","uploadInput","uploadOverlay","uploadCancelButton","scaleControlSmaller","scaleControlBigger","effectsList","uploadForm","onUploadEscKeydown","activeElement","closeUploadOverlay","checked","imgFilters","picturesData","onSuccess","onFail","fetch","method","then","response","ok","catch","picturesContainer","buttonDefault","buttonRandom","buttonDiscussed","picturesRemove","picture","activeClassRemove","debounce","callback","delay","timeout","clearTimeout","setTimeout","randomPicturesData","i","randomElement","lastNumber","array","Math","floor","random","includes","push","sort","a","b","json","alertContainer","createElement","zIndex","position","left","top","right","padding","margin","lineHeight","fontSize","textAlign","backgroundColor","append","showAlert"],"sourceRoot":""}